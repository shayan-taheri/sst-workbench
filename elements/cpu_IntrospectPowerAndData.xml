<?xml version="1.0"?>

<!-- general sim configuration -->
<!-- overridden by the command line -->
<config>
    lib-path=/home/myhsieh/local/sst/lib/sst
    stopAtCycle=100000
</config>

<!-- reference definition for cpu1 component -->

<!-- McPAT--> 
<cpu1_params>
    <clock>2.2GHz</clock>
    <rev>1.5</rev>
    <power_monitor>YES</power_monitor>
    <power_model>McPAT</power_model>
    <power_level>2</power_level>    
    <supply_voltage>1.5</supply_voltage>
    <McPAT_XMLfile>/home/myhsieh/Desktop/trunk/sst/techModels/libMcPATbeta/McPATOOO.xml</McPAT_XMLfile>
    <core_temperature>360</core_temperature>
    <core_tech_node>32</core_tech_node>
    <core_clock_rate>2200000000</core_clock_rate>
    <core_physical_address_width>52</core_physical_address_width>
    <core_virtual_address_width>64</core_virtual_address_width>
    <core_virtual_memory_page_size>4096</core_virtual_memory_page_size>
    <core_number_hardware_threads>2</core_number_hardware_threads>
    <machine_bits>64</machine_bits>
    <machine_type>0</machine_type> 
    <archi_Regs_IRF_size>32</archi_Regs_IRF_size> 
    <archi_Regs_FRF_size>32</archi_Regs_FRF_size>
    <core_phy_Regs_IRF_size>80</core_phy_Regs_IRF_size>
    <core_phy_Regs_FRF_size>80</core_phy_Regs_FRF_size>
    <core_issue_width>4</core_issue_width>
    <core_register_windows_size>8</core_register_windows_size> 
    <core_opcode_width>11</core_opcode_width>	
    <core_instruction_window_size>64</core_instruction_window_size> 
    <core_decode_width>4</core_decode_width> 
    <core_instruction_length>32</core_instruction_length>
    <core_instruction_buffer_size>20</core_instruction_buffer_size> 
    <core_number_instruction_fetch_ports>1</core_number_instruction_fetch_ports>
    <core_fp_issue_width>1</core_fp_issue_width>
    <core_fp_instruction_window_size>64</core_fp_instruction_window_size>  
    <ALU_per_core>1</ALU_per_core> 
    <FPU_per_core>1</FPU_per_core>	
    <core_store_buffer_size>8</core_store_buffer_size> 
    <core_memory_ports>1</core_memory_ports>	
    <core_fetch_width>4</core_fetch_width> 
    <core_decode_width>4</core_decode_width>
    <core_commit_width>4</core_commit_width> 
    <core_int_pipeline_depth>12</core_int_pipeline_depth>
    <cache_freq>2200000000</cache_freq>
    <cache_il1_sC>32768</cache_il1_sC>
    <cache_il1_line_size>32</cache_il1_line_size>
    <cache_il1_associativity>8</cache_il1_associativity>
    <cache_il1_number_banks>1</cache_il1_number_banks>   
    <cache_il1_throughput>3</cache_il1_throughput>
    <cache_il1_latency>3</cache_il1_latency>
    <cache_il1_miss_buffer_size>16</cache_il1_miss_buffer_size>
    <cache_il1_fill_buffer_size>16</cache_il1_fill_buffer_size>
    <cache_il1_prefetch_buffer_size>16</cache_il1_prefetch_buffer_size>
    <cache_l1dir_sC>1048576</cache_l1dir_sC>
    <cache_l1dir_clock_rate>3500000000</cache_l1dir_clock_rate>
    <cache_l1dir_line_size>16</cache_l1dir_line_size>
    <cache_l1dir_number_banks>1</cache_l1dir_number_banks>
    <cache_l1dir_associativity>16</cache_l1dir_associativity>
    <cache_l1dir_throughput>2</cache_l1dir_throughput>
    <cache_l1dir_latency>100</cache_l1dir_latency>
    <cache_l1dir_miss_buffer_size>8</cache_l1dir_miss_buffer_size>
    <cache_l1dir_fill_buffer_size>8</cache_l1dir_fill_buffer_size>
    <cache_l1dir_prefetch_buffer_size>8</cache_l1dir_prefetch_buffer_size>
    <cache_l1dir_wbb_buffer_sizes>8</cache_l1dir_wbb_buffer_sizes> 
    <cache_l1dir_device_type>0</cache_l1dir_device_type>
    <cache_l1dir_directory_type>1</cache_l1dir_directory_type>
    <cache_dl1_sC>16384</cache_dl1_sC>
    <cache_dl1_line_size>32</cache_dl1_line_size>
    <cache_dl1_associativity>8</cache_dl1_associativity>
    <cache_dl1_number_banks>1</cache_dl1_number_banks>
    <cache_dl1_throughput>3</cache_dl1_throughput>
    <cache_dl1_latency>3</cache_dl1_latency>
    <cache_dl1_miss_buffer_size>16</cache_dl1_miss_buffer_size>
    <cache_dl1_fill_buffer_size>16</cache_dl1_fill_buffer_size>
    <cache_dl1_prefetch_buffer_size>16</cache_dl1_prefetch_buffer_size>
    <cache_dl1_wbb_buffer_sizes>16</cache_dl1_wbb_buffer_sizes>    
    <cache_itlb_number_entries>128</cache_itlb_number_entries> 
    <cache_dtlb_number_entries>128</cache_dtlb_number_entries>
    <bpred_prediction_width>4</bpred_prediction_width>
    <bpred_global_predictor_bits>2</bpred_global_predictor_bits>
    <bpred_global_predictor_entries>4096</bpred_global_predictor_entries>
    <bpred_local_predictor_size>10</bpred_local_predictor_size>
    <bpred_local_predictor_entries>1024</bpred_local_predictor_entries>
    <bpred_chooser_predictor_bits>2</bpred_chooser_predictor_bits>
    <bpred_chooser_predictor_entries>4096</bpred_chooser_predictor_entries>
    <core_RAS_size>32</core_RAS_size>
    <core_ROB_size>80</core_ROB_size>
    <btb_sC>8192</btb_sC>
    <btb_associativity>2</btb_associativity>
    <btb_throughput>1</btb_throughput>
    <btb_latency>3</btb_latency>
    <btb_number_banks>1</btb_number_banks>
    <btb_line_size>4</btb_line_size>
    <alu_sC>50</alu_sC>
    <fpu_sC>350</fpu_sC>
    <cache_l2_clock_rate>3500000000</cache_l2_clock_rate>
    <cache_l2_sC>262144</cache_l2_sC>
    <cache_l2_line_size>64</cache_l2_line_size>
    <cache_l2_number_banks>1</cache_l2_number_banks>
    <cache_l2_associativity>16</cache_l2_associativity>
    <cache_l2_throughput>2</cache_l2_throughput>
    <cache_l2_latency>100</cache_l2_latency>
    <cache_l2_miss_buffer_size>8</cache_l2_miss_buffer_size>
    <cache_l2_fill_buffer_size>8</cache_l2_fill_buffer_size>
    <cache_l2_prefetch_buffer_size>8</cache_l2_prefetch_buffer_size>
    <cache_l2_wbb_buffer_sizes>8</cache_l2_wbb_buffer_sizes>
    <cache_l2_device_type>1</cache_l2_device_type>
    <cache_l2dir_sC>1048576</cache_l2dir_sC>
    <cache_l2dir_clock_rate>3500000000</cache_l2dir_clock_rate>
    <cache_l2dir_line_size>16</cache_l2dir_line_size>
    <cache_l2dir_number_banks>1</cache_l2dir_number_banks>
    <cache_l2dir_associativity>16</cache_l2dir_associativity>
    <cache_l2dir_throughput>2</cache_l2dir_throughput>
    <cache_l2dir_latency>100</cache_l2dir_latency>
    <cache_l2dir_miss_buffer_size>8</cache_l2dir_miss_buffer_size>
    <cache_l2dir_fill_buffer_size>8</cache_l2dir_fill_buffer_size>
    <cache_l2dir_prefetch_buffer_size>8</cache_l2dir_prefetch_buffer_size>
    <cache_l2dir_wbb_buffer_sizes>8</cache_l2dir_wbb_buffer_sizes> 
    <cache_l2dir_device_type>0</cache_l2dir_device_type>
    <cache_l2dir_directory_type>1</cache_l2dir_directory_type>
    <cache_l3_clock_rate>3500000000</cache_l3_clock_rate>
    <cache_l3_sC>1048576</cache_l3_sC>
    <cache_l3_line_size>64</cache_l3_line_size>
    <cache_l3_number_banks>1</cache_l3_number_banks>
    <cache_l3_associativity>16</cache_l3_associativity>
    <cache_l3_throughput>2</cache_l3_throughput>
    <cache_l3_latency>100</cache_l3_latency>
    <cache_l3_miss_buffer_size>16</cache_l3_miss_buffer_size>
    <cache_l3_fill_buffer_size>16</cache_l3_fill_buffer_size>
    <cache_l3_prefetch_buffer_size>16</cache_l3_prefetch_buffer_size>
    <cache_l3_wbb_buffer_sizes>16</cache_l3_wbb_buffer_sizes>
    <cache_l3_device_type>0</cache_l3_device_type>
    <exeu_sC>100.0</exeu_sC>
    <mc_clock_rate>400000000</mc_clock_rate>
    <mc_llc_line_length>64</mc_llc_line_length>
    <mc_databus_width>128</mc_databus_width>
    <mc_addressbus_width>51</mc_addressbus_width>
    <mc_req_window_size_per_channel>32</mc_req_window_size_per_channel>
    <mc_memory_channels_per_mc>2</mc_memory_channels_per_mc>
    <mc_IO_buffer_size_per_channel>32</mc_IO_buffer_size_per_channel>
    <mainmemory_peak_transfer_rate>6400</mainmemory_peak_transfer_rate>
    <mainmemory_number_ranks>2</mainmemory_number_ranks>
    <router_clock_rate>3500000000</router_clock_rate>
    <router_has_global_link>0</router_has_global_link>
    <router_flit_bits>128</router_flit_bits>
    <router_input_buffer_entries_per_vc>16</router_input_buffer_entries_per_vc>
    <router_virtual_channel_per_port>2</router_virtual_channel_per_port>
    <router_input_ports>5</router_input_ports>
    <router_output_ports>8</router_output_ports>
    <router_link_throughput>1</router_link_throughput>
    <router_link_latency>1</router_link_latency>
    <router_horizontal_nodes>8</router_horizontal_nodes> 
    <router_vertical_nodes>4</router_vertical_nodes>
    <router_topology>RING</router_topology>
    <core_number_of_NoCs>1</core_number_of_NoCs>   	    		
    <push_introspector>CountIntrospector</push_introspector>	    		   
</cpu1_params>

<cpu2_params>
    <clock>2.2GHz</clock>
    <rev>1.5</rev>
    <power_monitor>YES</power_monitor>
    <power_model>McPAT</power_model>
    <power_level>2</power_level>    
    <supply_voltage>1.5</supply_voltage>
    <McPAT_XMLfile>/home/myhsieh/Desktop/trunk/sst/techModels/libMcPATbeta/McPATOOO.xml</McPAT_XMLfile>
    <core_temperature>360</core_temperature>
    <core_tech_node>32</core_tech_node>
    <core_clock_rate>2200000000</core_clock_rate>
    <core_physical_address_width>52</core_physical_address_width>
    <core_virtual_address_width>64</core_virtual_address_width>
    <core_virtual_memory_page_size>4096</core_virtual_memory_page_size>
    <core_number_hardware_threads>2</core_number_hardware_threads>
    <machine_bits>64</machine_bits>
    <machine_type>0</machine_type> 
    <archi_Regs_IRF_size>32</archi_Regs_IRF_size> 
    <archi_Regs_FRF_size>32</archi_Regs_FRF_size>
    <core_phy_Regs_IRF_size>80</core_phy_Regs_IRF_size>
    <core_phy_Regs_FRF_size>80</core_phy_Regs_FRF_size>
    <core_issue_width>4</core_issue_width>
    <core_register_windows_size>8</core_register_windows_size> 
    <core_opcode_width>11</core_opcode_width>	
    <core_instruction_window_size>64</core_instruction_window_size> 
    <core_decode_width>4</core_decode_width> 
    <core_instruction_length>32</core_instruction_length>
    <core_instruction_buffer_size>20</core_instruction_buffer_size> 
    <core_number_instruction_fetch_ports>1</core_number_instruction_fetch_ports>
    <core_fp_issue_width>1</core_fp_issue_width>
    <core_fp_instruction_window_size>64</core_fp_instruction_window_size>  
    <ALU_per_core>1</ALU_per_core> 
    <FPU_per_core>1</FPU_per_core>	
    <core_store_buffer_size>8</core_store_buffer_size> 
    <core_memory_ports>1</core_memory_ports>	
    <core_fetch_width>4</core_fetch_width> 
    <core_decode_width>4</core_decode_width>
    <core_commit_width>4</core_commit_width> 
    <core_int_pipeline_depth>12</core_int_pipeline_depth>
    <cache_freq>2200000000</cache_freq>
    <cache_il1_sC>32768</cache_il1_sC>
    <cache_il1_line_size>32</cache_il1_line_size>
    <cache_il1_associativity>8</cache_il1_associativity>
    <cache_il1_number_banks>1</cache_il1_number_banks>   
    <cache_il1_throughput>3</cache_il1_throughput>
    <cache_il1_latency>3</cache_il1_latency>
    <cache_il1_miss_buffer_size>16</cache_il1_miss_buffer_size>
    <cache_il1_fill_buffer_size>16</cache_il1_fill_buffer_size>
    <cache_il1_prefetch_buffer_size>16</cache_il1_prefetch_buffer_size>
    <cache_l1dir_sC>1048576</cache_l1dir_sC>
    <cache_l1dir_clock_rate>3500000000</cache_l1dir_clock_rate>
    <cache_l1dir_line_size>16</cache_l1dir_line_size>
    <cache_l1dir_number_banks>1</cache_l1dir_number_banks>
    <cache_l1dir_associativity>16</cache_l1dir_associativity>
    <cache_l1dir_throughput>2</cache_l1dir_throughput>
    <cache_l1dir_latency>100</cache_l1dir_latency>
    <cache_l1dir_miss_buffer_size>8</cache_l1dir_miss_buffer_size>
    <cache_l1dir_fill_buffer_size>8</cache_l1dir_fill_buffer_size>
    <cache_l1dir_prefetch_buffer_size>8</cache_l1dir_prefetch_buffer_size>
    <cache_l1dir_wbb_buffer_sizes>8</cache_l1dir_wbb_buffer_sizes> 
    <cache_l1dir_device_type>0</cache_l1dir_device_type>
    <cache_l1dir_directory_type>1</cache_l1dir_directory_type>
    <cache_dl1_sC>16384</cache_dl1_sC>
    <cache_dl1_line_size>32</cache_dl1_line_size>
    <cache_dl1_associativity>8</cache_dl1_associativity>
    <cache_dl1_number_banks>1</cache_dl1_number_banks>
    <cache_dl1_throughput>3</cache_dl1_throughput>
    <cache_dl1_latency>3</cache_dl1_latency>
    <cache_dl1_miss_buffer_size>16</cache_dl1_miss_buffer_size>
    <cache_dl1_fill_buffer_size>16</cache_dl1_fill_buffer_size>
    <cache_dl1_prefetch_buffer_size>16</cache_dl1_prefetch_buffer_size>
    <cache_dl1_wbb_buffer_sizes>16</cache_dl1_wbb_buffer_sizes>        		
    <push_introspector>CountIntrospector</push_introspector>  
</cpu2_params>

<!-- reference definition for cpu component link -->
<cpu_link_params>
    <lat>1ns</lat>
    <name>MEM</name>
</cpu_link_params>

<|-- reference definition -->
<xbar_clock>2GHz</xbar_clock>

<|-- reference definition -->
<xbar_link_params>
	<lat>10ns</lat>
    <name>port1</name>
</xbar_link_params>

<!-- reference definition for introspector component -->
<intro1_params>
    <period>50ns</period>
    <model>cpu_PowerAndData</model>
</intro1_params>



<sst>
	<introspector id="CountIntrospector">	
		<introspector_cpu>
            <params>
                <params reference=intro1_params />
            </params>
		</introspector_cpu>
	</introspector>
	
	<component id="cpu1" weight=1.0 >	
		<cpu_PowerAndData>
            <params>
                <cpuId>0xdeadbeef</cpuId>
                <params reference=cpu1_params />
            </params> 
			<links>
				<link id="cpu1xbar">
                    <params reference=cpu_link_params/>
				</link>
			</links>
		</cpu_PowerAndData>
	</component>

	<component id="cpu1.xbar">	
		<xbar>
            <params>
                <clock reference=xbar_clock />
                <rev> 1.4 </rev>
            </params>
			<links>
				<link id="cpu1xbar">
					<params>
                        <lat>2ns</lat>
                        <name>port0</name>
                    </params>
				</link>
				<link id="xbar2xbar">
                    <params reference=xbar_link_params />
				</link>
			</links>
		</xbar>
	</component>

	<component id="cpu2.xbar">	
		<xbar>
            <params>
                <clock reference=xbar_clock />
                <rev> 1.4 </rev>
            </params>
			<links>
				<link id="xbar2xbar">
					<params>
                         <lat>10ns</lat>
                        <name>port1</name>
                    </params>
				</link>
				<link id="cpu2xbar">
					 <params>
                        <lat>1ns</lat>
                        <name>port0</name>
					 </params>
				</link>
			</links>
		</xbar>
	</component>

	<component id="cpu2">	
		<cpu_PowerAndData>
            <params>
                <cpuId>0xdeadbeee</cpuId>
                <params reference=cpu2_params />
            </params>
			<links>
				<link id="cpu2xbar">
                    <params reference=cpu_link_params/>
				</link>
			</links>
		</cpu_PowerAndData>
	</component>
</sst>
