<?xml version="1.0"?>

<!-- This example was taken from the first version of the "cpu" -->
<!-- component and the "sdl.xml" configuration file that had two -->
<!-- cpus and two xbars connected to each other. It probably does -->
<!-- not work anymore since the current build is using the second -->
<!-- version of the cpu ("cpuV2"). See the cpuV1.cc and cpuV1.h for -->
<!-- how it was interfaced with SST. -->

<!-- general sim configuration -->
<!-- overridden by the command line -->
<config>
    <!--stopAtCycle=100000 -->
</config>

<!-- reference definition for cpu component -->
<cpu_params>
    <clock>1GHz</clock>
    <rev>1.5</rev>
    <mccpu_ihistfile>mc_insthist.dat</mccpu_ihistfile>
    <mccpu_iprobfile>mc_instprob.dat</mccpu_iprobfile>
    <mccpu_perffile>mc_perfcnt.dat</mccpu_perffile>
    <mccpu_outputfile>mc_output</mccpu_outputfile>
</cpu_params>

<!-- reference definition for cpu component link -->
<cpu_link_params>
    <lat>2ns</lat>
    <name>memory</name>
</cpu_link_params>

<!-- reference definition -->
<xbar_clock>1GHz</xbar_clock>

<!-- reference definition -->
<xbar_link_params>
	<lat>2ns</lat>
    <name>port1</name>
</xbar_link_params>

<!-- reference definition -->
<cpu_clock> 1GHz </cpu_clock>

<sst>
	<component id="cpu1" weight=1.0 >	
		<cpuMcNiagara>
            <params>
                <cpuId>0xdeadbeef</cpuId>
                <params reference=cpu_params />
            </params> 
			<links>
				<link id="cpu1xbar">
                    <params reference=cpu_link_params/>
				</link>
			</links>
		</cpuMcNiagara>
	</component>

	<component id="cpu1.xbar">	
		<xbar>
            <params>
                <clock reference=xbar_clock />
                <rev> 1.4 </rev>
            </params>
			<links>
				<link id="cpu1xbar">
					<params>
                        <lat>2ns</lat>
                        <name>port0</name>
                    </params>
				</link>
				<link id="xbar2xbar">
					 <params lat="1ns" name="port1" />
                    <params reference=xbar_link_params />
				</link>
			</links>
		</xbar>
	</component>

	<component id="cpu2.xbar">	
		<xbar>
            <params>
                <clock reference=xbar_clock />
                <rev> 1.4 </rev>
            </params>
			<links>
				<link id="xbar2xbar">
					<params>
                         <lat>2ns</lat>
                        <name>port1</name>
                    </params>
				</link>
				<link id="cpu2xbar">
					 <params>
                        <lat>2ns</lat>
                        <name>port0</name>
					 </params>
				</link>
			</links>
		</xbar>
	</component>

	<component id="cpu2">	
		<cpuMcNiagara>
            <params>
                <cpuId>0xdeadbeee</cpuId>
                <params reference=cpu_params />
            </params>
			<links>
				<link id="cpu2xbar">
                    <params reference=cpu_link_params/>
				</link>
			</links>
		</cpuMcNiagara>
	</component>
</sst>
