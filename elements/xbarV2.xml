<?xml version="1.0"?>

<config>
    stopAtCycle=1000000000000
    run-mode=both
</config>

<|-- reference definition -->
<xbar_clock>1GHz</xbar_clock>

<_initialCredit>  8 </_initialCredit>
<_readReqCredit>  1 </_readReqCredit>
<_writeReqCredit> 2 </_writeReqCredit>
<_readRespCredit>  0 </_readRespCredit>
<_writeRespCredit> 1 </_writeRespCredit>

<sst>
	<component id="opteron.0" >	
		<genericProc>
			<params>
              <debug> 0 </debug>
			  <clock> 2.0Ghz </clock>
			  <execFile> components/genericProc/programs/fooPrint </execFile>
			  <verbose> 0 </verbose>
			  <externalMem> 1 </externalMem>
              <initialCredit   reference=_initialCredit />
              <readReqCredit   reference=_readReqCredit />
              <writeReqCredit  reference=_writeReqCredit />
			 </params>
			<links>
				<link id="opteron2xbar.0">
					<params>
						<name> mem0 </name>
						<lat> 1ps </lat>
					</params>
				</link>
			</links>
		</genericProc>
	</component>

    <component id="xbar.0">
        <xbarV2>
            <params>
                <info> yes </info>
                <debug> no </debug>
                <debugPort> no </debugPort>
                <clock reference=xbar_clock />
                <numPorts> 3 </numPorts>

                <port0.initialCredit>   8 </port0.initialCredit>
                <port0.readRespCredit>  1 </port0.readRespCredit>
                <port0.writeRespCredit> 0 </port0.writeRespCredit>

                <port1.address>        0          </port1.address>
                <port1.length>         0x80000000 </port1.length>
                <port1.initialCredit   reference=_initialCredit   />
                <port1.readReqCredit   reference=_readReqCredit   />
                <port1.writeReqCredit  reference=_writeReqCredit  />
                <port1.readRespCredit  reference=_readRespCredit  />
                <port1.writeRespCredit reference=_writeRespCredit />

                <port2.address>        0x80000000 </port2.address>
                <port2.length>         0x80000000 </port2.length>
                <port2.initialCredit   reference=_initialCredit />
                <port2.readReqCredit   reference=_readReqCredit   />
                <port2.writeReqCredit  reference=_writeReqCredit  />
                <port2.readRespCredit  reference=_readRespCredit  />
                <port2.writeRespCredit reference=_writeRespCredit />
            </params>
            <links>
                <link id="opteron2xbar.0">
                    <params>
                        <lat> 1ps </lat>
                        <name> port0 </name>
                    </params>
                </link>
                <link id="memory.0.2xbar.0">
                    <params>
                        <lat> 1ps </lat>
                        <name> port1 </name>
                    </params>
                </link>
                <link id="memory.1.2xbar.0">
                    <params>
                        <lat> 1ps </lat>
                        <name> port2 </name>
                    </params>
                </link>
            </links>
        </xbarV2>
    </component>

 	<component id="mem.0.0">
 		<DRAMSimC>
 			<params>
                 <clock> 2.0Ghz </clock>
                 <systemini> system.ini </systemini>
                 <deviceini> ini/DDR3_micron_32M_8B_x8_sg15.ini </deviceini>
                 <pwd> DRAMSim </pwd>
                 <printstats> no </printstats>
                 <info> yes </info>
                 <debug> no </debug>
                <initialCredit    reference=_initialCredit   />
                <readRespCredit   reference=_readRespCredit  />
                <writeRespCredit  reference=_writeRespCredit />
 			</params>
 			<links>
 				<link id="memory.0.2xbar.0">
 					<params>
 						<name> bus </name>
 						<lat> 1ps </lat>
 					</params>
 				</link>
 			</links>
 		</DRAMSimC>
 	</component>

 	<component id="mem.0.1">
 		<DRAMSimC>
 			<params>
                 <clock> 2.0Ghz </clock>
                 <systemini> system.ini </systemini>
                 <deviceini> ini/DDR3_micron_32M_8B_x8_sg15.ini </deviceini>
                 <pwd> DRAMSim </pwd>
                 <printstats> no </printstats>
                 <info> yes </info>
                 <debug> no </debug>
                <initialCredit    reference=_initialCredit   />
                <readRespCredit   reference=_readRespCredit  />
                <writeRespCredit  reference=_writeRespCredit />
 			</params>
 			<links>
 				<link id="memory.1.2xbar.0">
 					<params>
 						<name> bus </name>
 						<lat> 1ps </lat>
 					</params>
 				</link>
 			</links>
 		</DRAMSimC>
 	</component>

</sst>
